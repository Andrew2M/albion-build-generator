(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const E=e=>{const t=document.querySelectorAll(".item-type");let n={};const s=[...t].filter(o=>o.checked).map(o=>o.name);for(let o in e)n[o]=e[o].filter(r=>s.includes(r.category));return n},c={initState:{},current:{},qty:{},isRunning:!1},F=()=>c.qty,y=()=>c.initState,$=()=>c.isRunning,S=e=>{c.isRunning=e},d=()=>c.current,L=e=>{c.current={...e}},N=e=>{c.initState=e,c.qty.weapon=c.initState.weapon.length,c.qty.helmet=c.initState.helmet.length,c.qty.armor=c.initState.armor.length,c.qty.shoe=c.initState.shoe.length,c.qty.offhand=c.initState.offhand.length,c.qty.cape=c.initState.cape.length},H=()=>{const e=document.querySelector(".options__container"),t=document.getElementById("menu-btn");e.classList.toggle("open__vertical"),t.children[0].classList.toggle("turn")},b=()=>{const e=document.getElementById("notification"),t=d();let n=[];for(let s in t)t[s].length==0&&n.push(s);const i=n.map((s,o)=>n.length>=2&&o===n.length-1?`and <span class="category">${s}</span>`:`<span class="category">${s}</span>`);e.innerHTML=n.length?`Open <span id="link">Filter Options</span> and select at least one ${i.join(", ").split(", and").join(" and")} type!`:"",n.length?(e.style="visibility: visible;",document.getElementById("link").addEventListener("click",H)):e.style="visibility: hidden;"},m=({htmlElement:e,itemDataObj:t})=>{if(t){if(e.title=t.name,e.children[0].classList.add("hidden"),e.classList.remove("hidden"),t.type.length==2){const n=document.querySelector(".offhand-slot");n.children[0].classList.add("hidden"),n.classList.remove("hidden")}}else e.children[0].classList.add("hidden")},h=(e,t,n=250)=>(e.dataset.state&&(n=0),new Promise((i,s)=>{setTimeout(()=>{i({htmlElement:e,itemDataObj:t})},n)}));function B(e){return Math.floor(Math.random()*e)}const f=(e,t,n="")=>{if(e.dataset.state||!t.length)return;const i=t[B(t.length)];e.dataset.type=i.type;const s=`https://render.albiononline.com/v1/item/T${B(5)+4}${n}_${i.image}.png`;if(e.style.backgroundImage=`url(${s})`,i.type==="2H"){const o=document.querySelectorAll(".item-slot")[4];o.style.backgroundImage=`url(${s})`,o.title=e.name}return i};function g(e){let t=e.length,n,i;for(;t;)i=Math.floor(Math.random()*t--),n=e[t],e[t]=e[i],e[i]=n;return e}function M({weapon:e,offhand:t,helmet:n,armor:i,shoe:s,cape:o}){S(!0),p(),O();const r=document.querySelectorAll(".item-slot");document.querySelectorAll(".image-slot").forEach(u=>u.classList.add("hidden")),r.forEach(u=>u.children[0].classList.remove("hidden")),g(n),g(i),g(s),g(e),g(t),g(o),setTimeout(()=>{S(!1),p(),r.forEach(u=>u.children[0].classList.add("hidden"))},750)}const k=()=>M(d()),O=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle");e.removeEventListener("click",I),t.removeEventListener("click",k),e.classList.remove("btn--success"),e.classList.add("btn--danger"),t.classList.remove("btn--success"),t.classList.add("btn--danger")},x=e=>{if(e.dataset.state=="blocked"){const t=d().weapon.filter(n=>n.type=="1H");d().weapon=t,L(d())}else e.dataset.state||L(E(y()))},C=document.querySelector(".helmet-slot"),P=document.querySelector(".armor-slot"),G=document.querySelector(".shoe-slot"),J=document.querySelector(".main-hand-slot"),q=document.querySelector(".offhand-slot"),W=document.querySelector(".cape-slot"),l=document.querySelectorAll(".item-slot"),z=document.getElementById("generate"),Q=({weapon:e,offhand:t,helmet:n,armor:i,shoe:s,cape:o})=>{const r=z.children[0];r.classList.add("spin"),S(!0),p(),O(),l.forEach(a=>{a.dataset.state||a.children[0].classList.remove("hidden")}),console.log(q.dataset.state),x(q);const v=f(C,n,"_HEAD"),u=f(P,i,"_ARMOR"),A=f(G,s,"_SHOES"),R=f(W,o),_=f(J,e),T=l[3].dataset.type==="1H"?f(q,t,"_OFF"):null;l[4].style.opacity="1",l[3].dataset.type=="2H"&&l[3].dataset.state&&(l[4].style.opacity="0.4"),h(l[5],R,400).then(a=>(m(a),h(l[0],v))).then(a=>(m(a),h(l[1],u))).then(a=>(m(a),h(l[2],A))).then(a=>(m(a),h(l[3],_))).then(a=>(m(a),r.classList.remove("spin"),l[3].dataset.type==="1H"?(l[4].style.opacity="1",h(l[4],T)):(l[4].style.opacity="0.4",h(l[4],_)))).then(a=>{S(!1),p(),m(a)}).catch(a=>{console.error(a)})},I=()=>Q(d()),p=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle"),{weapon:n,offhand:i,helmet:s,armor:o,shoe:r,cape:v}=d();n.length&&i.length&&s.length&&o.length&&r.length&&v.length?(e.addEventListener("click",I),t.addEventListener("click",k),$()||(e.classList="btn__theme btn--success",t.classList="btn__theme btn--success")):(e.removeEventListener("click",I),t.removeEventListener("click",k),e.classList="btn__theme btn--danger",t.classList="btn__theme btn--danger")},w=e=>{const t=d()[e.dataset.type].length;F()[e.dataset.type],document.getElementById("generate");const n=document.querySelector(`.options__form[data-type=${e.dataset.type}]`);t?(n.classList="options__form options--success",n.dataset.status="unchecked"):(n.classList="options__form options--danger",n.dataset.status="checked"),p()},Y=({target:e})=>{e.dataset.type&&(document.querySelectorAll(`.${e.dataset.type}`).forEach(t=>t.checked=e.dataset.state==="unchecked"),e.dataset.state=e.dataset.state==="checked"?"unchecked":"checked",e.dataset.state==="checked"?e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg>
    `:e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path fill="currentColor" d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/></svg>
  `,L(E(y())),w(e),b())},Z=function(){const e=document.getElementById("filter-menu__title"),t=e.innerText,n=this.style.backgroundColor;this.style.backgroundColor="#008000",localStorage.setItem("customFilter",JSON.stringify(d())),e.innerText="Saved Filter Options",e.classList.add("heading--confirmed"),setTimeout(()=>{e.innerText=t,this.style.backgroundColor=n,e.classList.remove("heading--confirmed")},2e3)},j=e=>{const t=document.querySelectorAll(".item-type"),n=document.querySelectorAll(".options__form"),i=[];for(let s in e)e[s].forEach(o=>{i.includes(o.category)||i.push(o.category)});t.forEach(s=>{i.includes(s.name)&&(s.checked=!0)}),n.forEach(s=>w(s))},K=({target:e})=>{e.classList.contains("item-type")&&(L(E(y())),p(),b(),w(e))},V=function(){if(!this.dataset.state&&this.style.backgroundImage)if(this.dataset.type==="2H"){this.dataset.state="blocked",this.children[1].style.opacity=1,this.children[1].classList.remove("hidden");const e=document.querySelector(".offhand-slot");e.dataset.state="blocked"}else this.dataset.type&&(this.dataset.state="blocked",this.children[1].style.opacity=1,this.children[1].classList.remove("hidden"));else if(this.dataset.state)if(this.dataset.type==="2H"){const e=document.querySelector(".offhand-slot");delete this.dataset.state,delete e.dataset.state,this.children[1].style.opacity=1,this.children[1].classList.add("hidden")}else this.dataset.type&&(delete this.dataset.state,this.children[1].classList.add("hidden"))},D=function(){!this.dataset.state&&this.style.backgroundImage&&(this.children[1].style.opacity=.65,this.children[1].classList.remove("hidden"))},U=function(){!this.dataset.state&&this.style.backgroundImage&&this.children[1].classList.add("hidden")},X=document.getElementById("generate"),ee=document.getElementById("shuffle"),te=document.getElementById("menu-btn"),ne=document.getElementById("save-config"),se=document.querySelectorAll(".item-slot"),oe=async()=>{const t=await(await fetch("./items.json")).json();N({...t});const n=JSON.parse(localStorage.getItem("customFilter"));L(n||y()),j(n||y()),M(n||y()),b(),ee.addEventListener("click",k),X.addEventListener("click",I),document.getElementById("filter-menu").addEventListener("click",K);const s=document.querySelectorAll(".btn__filter");te.addEventListener("click",H),s.forEach(o=>o.addEventListener("click",Y)),ne.addEventListener("click",Z),se.forEach(o=>{o.addEventListener("click",V),o.addEventListener("mouseover",D),o.addEventListener("mouseout",U)})};document.addEventListener("DOMContentLoaded",oe);
