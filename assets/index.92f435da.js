(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function w({target:e}){const t=document.getElementById("notification");e.title&&navigator.clipboard.writeText(e.title).then(()=>{e.style.transition="250ms",e.style.transform="scale(1.2)",t.style="visibility: visible;",t.innerText="Item name copied to Clipboard!",setTimeout(()=>{e.style.transition="250ms",e.style.transform="scale(1)"},250),setTimeout(()=>{t.innerText="",t.style="visibility: hidden;"},1500)})}const A=e=>{const t=document.querySelectorAll(".item-type");let s={};const n=[...t].filter(i=>i.checked).map(i=>i.name);for(let i in e)s[i]=e[i].filter(r=>n.includes(r.category));return s},c={initState:{},current:{},qty:{},isRunning:!1},F=()=>c.qty,v=()=>c.initState,C=()=>c.isRunning,L=e=>{c.isRunning=e},y=()=>c.current,q=e=>{c.current={...e}},N=e=>{c.initState=e,c.qty.weapon=c.initState.weapon.length,c.qty.helmet=c.initState.helmet.length,c.qty.armor=c.initState.armor.length,c.qty.shoe=c.initState.shoe.length,c.qty.offhand=c.initState.offhand.length,c.qty.cape=c.initState.cape.length},T=()=>{const e=document.querySelector(".options__container"),t=document.getElementById("menu-btn");e.classList.toggle("open__vertical"),t.children[0].classList.toggle("turn")},E=()=>{const e=document.getElementById("notification"),t=y();let s=[];for(let n in t)t[n].length==0&&s.push(n);const o=s.map((n,i)=>s.length>=2&&i===s.length-1?`and <span class="category">${n}</span>`:`<span class="category">${n}</span>`);e.innerHTML=s.length?`Open <span id="link">Filter Options</span> and select at least one ${o.join(", ").split(", and").join(" and")} type!`:"",s.length?(e.style="visibility: visible;",document.getElementById("link").addEventListener("click",T)):e.style="visibility: hidden;"},m=({htmlElement:e,itemDataObj:t})=>{const s=e.children[1];if(t){if(s.title=t.name,e.children[0].classList.add("hidden"),s.classList.remove("hidden"),t.type.length==2){const o=document.querySelector(".offhand-slot"),n=document.querySelector(".offhand-slot__image");o.children[0].classList.add("hidden"),n.classList.remove("hidden")}}else e.children[0].classList.add("hidden")},u=(e,t,s=200)=>new Promise((o,n)=>{setTimeout(()=>{o({htmlElement:e,itemDataObj:t})},s)});function B(e){return Math.floor(Math.random()*e)}const f=(e,t,s="")=>{if(e.removeAttribute("src"),e.style.opacity=1,!t.length)return;const o=t[B(t.length)],n=`https://render.albiononline.com/v1/item/T${B(5)+4}${s}_${o.image}.png`;if(e.setAttribute("src",n),o.type==="2H"){const i=document.querySelectorAll(".item-slot")[4].children[1];i.setAttribute("src",e.src),i.style.opacity=.4,i.title=e.name}return o};function h(e){let t=e.length,s,o;for(;t;)o=Math.floor(Math.random()*t--),s=e[t],e[t]=e[o],e[o]=s;return e}function O({weapon:e,offhand:t,helmet:s,armor:o,shoe:n,cape:i}){L(!0),g(),H();const r=document.querySelectorAll(".item-slot");document.querySelectorAll(".image-slot").forEach(d=>d.classList.add("hidden")),r.forEach(d=>d.children[0].classList.remove("hidden")),h(s),h(o),h(n),h(e),h(t),h(i),setTimeout(()=>{L(!1),g(),r.forEach(d=>d.children[0].classList.add("hidden"))},750)}const _=()=>O(y()),H=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle");e.removeEventListener("click",I),t.removeEventListener("click",_),e.classList.remove("btn--success"),e.classList.add("btn--danger"),t.classList.remove("btn--success"),t.classList.add("btn--danger")},$=document.querySelector(".helmet-slot__image"),P=document.querySelector(".armor-slot__image"),J=document.querySelector(".shoe-slot__image"),G=document.querySelector(".main-hand-slot__image"),Q=document.querySelector(".offhand-slot__image"),z=document.querySelector(".cape-slot__image"),a=document.querySelectorAll(".item-slot"),Y=document.getElementById("generate"),Z=({weapon:e,offhand:t,helmet:s,armor:o,shoe:n,cape:i})=>{const r=Y.children[0];r.classList.add("spin"),L(!0),g(),H(),a.forEach(l=>l.children[0].classList.remove("hidden"));const S=f($,s,"_HEAD"),d=f(P,o,"_ARMOR"),R=f(J,n,"_SHOES"),x=f(z,i),p=f(G,e),k=(p==null?void 0:p.type)==="1H"?f(Q,t,"_OFF"):null;u(a[5],x,400).then(l=>(m(l),u(a[0],S))).then(l=>(m(l),u(a[1],d))).then(l=>(m(l),u(a[2],R))).then(l=>(m(l),u(a[3],p))).then(l=>(m(l),r.classList.remove("spin"),k?u(a[4],k):u(a[4],p))).then(l=>{L(!1),g(),m(l)}).catch(l=>{console.error(l)})},I=()=>Z(y()),g=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle"),{weapon:s,offhand:o,helmet:n,armor:i,shoe:r,cape:S}=y();s.length&&o.length&&n.length&&i.length&&r.length&&S.length?(e.addEventListener("click",I),t.addEventListener("click",_),C()||(e.classList="btn__theme btn--success",t.classList="btn__theme btn--success")):(e.removeEventListener("click",I),t.removeEventListener("click",_),e.classList="btn__theme btn--danger",t.classList="btn__theme btn--danger")},b=e=>{const t=y()[e.dataset.type].length,s=F()[e.dataset.type];document.getElementById("generate");const o=document.querySelector(`.options__form[data-type=${e.dataset.type}]`);t?t==s?(o.classList="options__form options--success",o.dataset.status="unchecked"):(o.classList="options__form options--warn",o.dataset.status="unchecked"):(o.classList="options__form options--danger",o.dataset.status="checked"),g()},j=({target:e})=>{e.dataset.type&&(document.querySelectorAll(`.${e.dataset.type}`).forEach(t=>t.checked=e.dataset.state==="unchecked"),e.dataset.state=e.dataset.state==="checked"?"unchecked":"checked",e.dataset.state==="checked"?e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg>
    `:e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path fill="currentColor" d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/></svg>
  `,q(A(v())),b(e),E())},K=function(){const e=document.getElementById("filter-menu__title"),t=e.innerText,s=this.style.backgroundColor;this.style.backgroundColor="#008000",localStorage.setItem("customFilter",JSON.stringify(y())),e.innerText="Saved Filter Options",e.classList.add("heading--confirmed"),setTimeout(()=>{e.innerText=t,this.style.backgroundColor=s,e.classList.remove("heading--confirmed")},2e3)},V=e=>{const t=document.querySelectorAll(".item-type"),s=document.querySelectorAll(".options__form"),o=[];for(let n in e)e[n].forEach(i=>{o.includes(i.category)||o.push(i.category)});t.forEach(n=>{o.includes(n.name)&&(n.checked=!0)}),s.forEach(n=>b(n))},D=({target:e})=>{e.classList.contains("item-type")&&(q(A(v())),g(),E(),b(e))},U=document.getElementById("generate"),X=document.getElementById("shuffle"),W=document.getElementById("menu-btn"),ee=document.getElementById("save-config"),M=document.querySelector(".build-container"),te=async()=>{const t=await(await fetch("./items.json")).json();N({...t});const s=JSON.parse(localStorage.getItem("customFilter"))||{weapon:[],armor:[],shoe:[],helmet:[],cape:[],offhand:[]};q(s||v()),V(s||v()),O(s||v()),E(),X.addEventListener("click",_),U.addEventListener("click",I),document.getElementById("filter-menu").addEventListener("click",D);const n=document.querySelectorAll(".btn__filter");W.addEventListener("click",T),n.forEach(i=>i.addEventListener("click",j)),ee.addEventListener("click",K),M.addEventListener("click",w),M.addEventListener("touchstart",w)};document.addEventListener("DOMContentLoaded",te);
