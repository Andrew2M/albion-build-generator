(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();function O({target:e}){const t=document.getElementById("notification");e.title&&navigator.clipboard.writeText(e.title).then(()=>{e.style.transition="250ms",e.style.transform="scale(1.2)",t.style="visibility: visible;",t.innerText="Item name copied to Clipboard!",setTimeout(()=>{e.style.transition="250ms",e.style.transform="scale(1)"},250),setTimeout(()=>{t.innerText="",t.style="visibility: hidden;"},1500)})}const H=(e,t=!1)=>{const o=document.querySelectorAll(".item-type");let s={};const c=[...o].filter(i=>i.checked).map(i=>i.name);for(let i in e)s[i]=e[i].filter(v=>c.includes(v.category));return s};let x={},a={},m={};const N=()=>m,I=()=>a,h=()=>x,E=e=>{x={...e}},$=e=>{a=e,m.weapon=a.weapon.length,m.helmet=a.helmet.length,m.armor=a.armor.length,m.shoe=a.shoe.length,m.offhand=a.offhand.length,m.cape=a.cape.length},F=()=>{const e=document.querySelector(".options__container"),t=document.getElementById("menu-btn");e.classList.toggle("open__vertical"),t.children[0].classList.toggle("turn")},q=()=>{const e=document.getElementById("notification"),t=h();let o=[];for(let n in t)t[n].length==0&&o.push(n);const s=o.map((n,c)=>o.length>=2&&c===o.length-1?`and <span class="category">${n}</span>`:`<span class="category">${n}</span>`);e.innerHTML=o.length?`Open <span id="link">Filter Options</span> and select at least one ${s.join(", ").split(", and").join(" and")} type!`:"",o.length?(e.style="visibility: visible;",document.getElementById("link").addEventListener("click",F)):e.style="visibility: hidden;"},w=()=>{const e=document.getElementById("generate"),{weapon:t,offhand:o,helmet:s,armor:n,shoe:c,cape:i}=h();t.length&&o.length&&s.length&&n.length&&c.length&&i.length?e.classList="btn__theme btn--success":e.classList="btn__theme btn--danger"},B=e=>{const t=h()[e.dataset.type].length,o=N()[e.dataset.type];document.getElementById("generate");const s=document.querySelector(`.options__form[data-type=${e.dataset.type}]`);t?t==o?(s.classList="options__form options--success",s.dataset.status="unchecked"):(s.classList="options__form options--warn",s.dataset.status="unchecked"):(s.classList="options__form options--danger",s.dataset.status="checked"),w()},R=({target:e})=>{e.dataset.type&&(document.querySelectorAll(`.${e.dataset.type}`).forEach(t=>t.checked=e.dataset.state==="unchecked"),e.dataset.state=e.dataset.state==="checked"?"unchecked":"checked",e.dataset.state==="checked"?e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg>
    `:e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path fill="currentColor" d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/></svg>
  `,E(H(I(),!0)),B(e),q())},P=function(){const e=document.getElementById("filter-menu__title"),t=e.innerText,o=this.style.backgroundColor;this.style.backgroundColor="#008000",localStorage.setItem("customFilter",JSON.stringify(h())),e.innerText="Saved Filter Options",e.classList.add("heading--confirmed"),setTimeout(()=>{e.innerText=t,this.style.backgroundColor=o,e.classList.remove("heading--confirmed")},2e3)};function g(e){let t=e.length,o,s;for(;t;)s=Math.floor(Math.random()*t--),o=e[t],e[t]=e[s],e[s]=o;return e}function T({weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c}){const i=document.querySelectorAll(".item-slot"),v=document.querySelectorAll(".image-slot"),b=document.getElementById("generate"),f=document.getElementById("shuffle");f.classList.remove("btn--success"),f.classList.add("btn--danger"),b.classList.remove("btn--success"),b.classList.add("btn--danger"),v.forEach(d=>d.classList.add("hidden")),i.forEach(d=>d.children[0].classList.remove("hidden")),g(o),g(s),g(n),g(e),g(t),g(c),setTimeout(()=>{w(),f.classList.add("btn--success"),f.classList.remove("btn--danger"),i.forEach(d=>d.children[0].classList.add("hidden"))},700)}const J=e=>{const t=document.querySelectorAll(".item-type"),o=document.querySelectorAll(".options__form"),s=[];for(let n in e)e[n].forEach(c=>{s.includes(c.category)||s.push(c.category)});t.forEach(n=>{s.includes(n.name)&&(n.checked=!0)}),o.forEach(n=>B(n))},p=({htmlElement:e,itemDataObj:t})=>{const o=e.children[1];if(t){if(o.title=t.name,e.children[0].classList.add("hidden"),o.classList.remove("hidden"),t.type.length==2){const s=document.querySelector(".offhand-slot"),n=document.querySelector(".offhand-slot__image");s.children[0].classList.add("hidden"),n.classList.remove("hidden")}}else e.children[0].classList.add("hidden")},u=(e,t,o=300)=>new Promise((s,n)=>{setTimeout(()=>{s({htmlElement:e,itemDataObj:t})},o)});function A(e){return Math.floor(Math.random()*e)}const y=(e,t,o="")=>{if(e.removeAttribute("src"),e.style.opacity=1,!t.length)return;const s=t[A(t.length)],n=`https://render.albiononline.com/v1/item/T${A(5)+4}${o}_${s.image}.png`;if(e.setAttribute("src",n),s.type==="2H"){const c=document.querySelectorAll(".item-slot")[4].children[1];c.setAttribute("src",e.src),c.style.opacity=.4,c.title=e.name}return s},G=document.querySelector(".helmet-slot__image"),Q=document.querySelector(".armor-slot__image"),z=document.querySelector(".shoe-slot__image"),Y=document.querySelector(".main-hand-slot__image"),Z=document.querySelector(".offhand-slot__image"),j=document.querySelector(".cape-slot__image"),r=document.querySelectorAll(".item-slot"),S=document.getElementById("generate"),_=document.getElementById("shuffle"),K=({weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c})=>{const i=S.children[0];i.classList.add("spin"),S.classList.remove("btn--success"),S.classList.add("btn--danger"),_.disabled=!0,_.classList.add("btn--danger"),S.removeEventListener("click",k),r.forEach(l=>l.children[0].classList.remove("hidden"));const v=y(G,o,"_HEAD"),b=y(Q,s,"_ARMOR"),f=y(z,n,"_SHOES"),d=y(j,c),L=y(Y,e),M=(L==null?void 0:L.type)==="1H"?y(Z,t,"_OFF"):null;u(r[5],d,600).then(l=>(p(l),u(r[0],v))).then(l=>(p(l),u(r[1],b))).then(l=>(p(l),u(r[2],f))).then(l=>(p(l),u(r[3],L))).then(l=>(p(l),w(),i.classList.remove("spin"),_.classList.remove("btn--danger"),_.classList.add("btn--success"),_.disabled=!1,M?u(r[4],M):u(r[4],L))).then(l=>{S.addEventListener("click",k),p(l)}).catch(l=>{console.error(l)})},k=()=>{const{weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c}=h();e.length&&t.length&&o.length&&s.length&&n.length&&c.length&&K(h())},V=document.getElementById("generate"),D=document.getElementById("shuffle"),U=document.getElementById("menu-btn"),X=document.getElementById("save-config"),W=async()=>{const t=await(await fetch("./items.json")).json();$({...t});const o=JSON.parse(localStorage.getItem("customFilter"))||{weapon:[],armor:[],shoe:[],helmet:[],cape:[],offhand:[]};E(o||I()),J(o||I()),T(o||I()),q();const s=()=>T(h());D.addEventListener("click",s),V.addEventListener("click",k),document.getElementById("filter-menu").addEventListener("click",({target:i})=>{i.classList.contains("item-type")&&(E(H(I(),!0)),q(),B(i))});const c=document.querySelectorAll(".btn__filter");U.addEventListener("click",F),c.forEach(i=>i.addEventListener("click",R)),X.addEventListener("click",P)};document.addEventListener("DOMContentLoaded",W);const C=document.querySelector(".build-container");C.addEventListener("click",O);C.addEventListener("touchstart",O);
