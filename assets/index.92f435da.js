(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();function O({target:e}){const t=document.getElementById("notification");e.title&&navigator.clipboard.writeText(e.title).then(()=>{e.style.transition="250ms",e.style.transform="scale(1.2)",t.style="visibility: visible;",t.innerText="Item name copied to Clipboard!",setTimeout(()=>{e.style.transition="250ms",e.style.transform="scale(1)"},250),setTimeout(()=>{t.innerText="",t.style="visibility: hidden;"},1500)})}const H=(e,t=!1)=>{const o=document.querySelectorAll(".item-type");let s={},n={};const i=[...o].filter(r=>r.checked).map(r=>r.name);for(let r in e)s[r]=e[r].filter(a=>i.includes(a.category));if(t){for(let r in s)n[r]=s[r].filter(a=>a.usage);s=n}return s};let x={},u={},f={};const N=()=>f,b=()=>u,g=()=>x,E=e=>{x={...e}},$=e=>{u=e,f.weapon=u.weapon.length,f.helmet=u.helmet.length,f.armor=u.armor.length,f.shoe=u.shoe.length,f.offhand=u.offhand.length,f.cape=u.cape.length},F=()=>{const e=document.querySelector(".options__container"),t=document.getElementById("menu-btn");e.classList.toggle("open__vertical"),t.children[0].classList.toggle("turn")},q=()=>{const e=document.getElementById("notification"),t=g();let o=[];for(let n in t)t[n].length==0&&o.push(n);const s=o.map((n,c)=>o.length>=2&&c===o.length-1?`and <span class="category">${n}</span>`:`<span class="category">${n}</span>`);e.innerHTML=o.length?`Open <span id="link">Filter Options</span> and select at least one ${s.join(", ").split(", and").join(" and")} type!`:"",o.length?(e.style="visibility: visible;",document.getElementById("link").addEventListener("click",F)):e.style="visibility: hidden;"},w=()=>{const e=document.getElementById("generate"),{weapon:t,offhand:o,helmet:s,armor:n,shoe:c,cape:i}=g();t.length&&o.length&&s.length&&n.length&&c.length&&i.length?e.classList="btn__theme btn--success":e.classList="btn__theme btn--danger"},B=e=>{const t=g()[e.dataset.type].length,o=N()[e.dataset.type];document.getElementById("generate");const s=document.querySelector(`.options__form[data-type=${e.dataset.type}]`);t?t==o?(s.classList="options__form options--success",s.dataset.status="unchecked"):(s.classList="options__form options--warn",s.dataset.status="unchecked"):(s.classList="options__form options--danger",s.dataset.status="checked"),w()},R=({target:e})=>{e.dataset.type&&(document.querySelectorAll(`.${e.dataset.type}`).forEach(t=>t.checked=e.dataset.state==="unchecked"),e.dataset.state=e.dataset.state==="checked"?"unchecked":"checked",e.dataset.state==="checked"?e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg>
    `:e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path fill="currentColor" d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/></svg>
  `,E(H(b(),!0)),B(e),q())},P=function(){const e=document.getElementById("filter-menu__title"),t=e.innerText,o=this.style.backgroundColor;this.style.backgroundColor="#008000",localStorage.setItem("customFilter",JSON.stringify(g())),e.innerText="Saved Filter Options",e.classList.add("heading--confirmed"),setTimeout(()=>{e.innerText=t,this.style.backgroundColor=o,e.classList.remove("heading--confirmed")},2e3)};function y(e){let t=e.length,o,s;for(;t;)s=Math.floor(Math.random()*t--),o=e[t],e[t]=e[s],e[s]=o;return e}function T({weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c}){const i=document.querySelectorAll(".item-slot"),r=document.querySelectorAll(".image-slot"),a=document.getElementById("generate"),p=document.getElementById("shuffle");p.classList.remove("btn--success"),p.classList.add("btn--danger"),a.classList.remove("btn--success"),a.classList.add("btn--danger"),r.forEach(m=>m.classList.add("hidden")),i.forEach(m=>m.children[0].classList.remove("hidden")),y(o),y(s),y(n),y(e),y(t),y(c),setTimeout(()=>{w(),p.classList.add("btn--success"),p.classList.remove("btn--danger"),i.forEach(m=>m.children[0].classList.add("hidden"))},700)}const J=e=>{const t=document.querySelectorAll(".item-type"),o=document.querySelectorAll(".options__form"),s=[];for(let n in e)e[n].forEach(c=>{s.includes(c.category)||s.push(c.category)});t.forEach(n=>{s.includes(n.name)&&(n.checked=!0)}),o.forEach(n=>B(n))},v=({htmlElement:e,itemDataObj:t})=>{const o=e.children[1];if(t){if(o.title=t.name,e.children[0].classList.add("hidden"),o.classList.remove("hidden"),t.type.length==2){const s=document.querySelector(".offhand-slot"),n=document.querySelector(".offhand-slot__image");s.children[0].classList.add("hidden"),n.classList.remove("hidden")}}else e.children[0].classList.add("hidden")},h=(e,t,o=300)=>new Promise((s,n)=>{setTimeout(()=>{s({htmlElement:e,itemDataObj:t})},o)});function A(e){return Math.floor(Math.random()*e)}const L=(e,t,o="")=>{if(e.removeAttribute("src"),e.style.opacity=1,!t.length)return;const s=t[A(t.length)],n=`https://render.albiononline.com/v1/item/T${A(5)+4}${o}_${s.image}.png`;if(e.setAttribute("src",n),s.type==="2H"){const c=document.querySelectorAll(".item-slot")[4].children[1];c.setAttribute("src",e.src),c.style.opacity=.4,c.title=e.name}return s},G=document.querySelector(".helmet-slot__image"),Q=document.querySelector(".armor-slot__image"),z=document.querySelector(".shoe-slot__image"),Y=document.querySelector(".main-hand-slot__image"),Z=document.querySelector(".offhand-slot__image"),j=document.querySelector(".cape-slot__image"),d=document.querySelectorAll(".item-slot"),_=document.getElementById("generate"),I=document.getElementById("shuffle"),K=({weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c})=>{const i=_.children[0];i.classList.add("spin"),_.classList.remove("btn--success"),_.classList.add("btn--danger"),I.disabled=!0,I.classList.add("btn--danger"),_.removeEventListener("click",k),d.forEach(l=>l.children[0].classList.remove("hidden"));const r=L(G,o,"_HEAD"),a=L(Q,s,"_ARMOR"),p=L(z,n,"_SHOES"),m=L(j,c),S=L(Y,e),M=(S==null?void 0:S.type)==="1H"?L(Z,t,"_OFF"):null;h(d[5],m,600).then(l=>(v(l),h(d[0],r))).then(l=>(v(l),h(d[1],a))).then(l=>(v(l),h(d[2],p))).then(l=>(v(l),h(d[3],S))).then(l=>(v(l),w(),i.classList.remove("spin"),I.classList.remove("btn--danger"),I.classList.add("btn--success"),I.disabled=!1,M?h(d[4],M):h(d[4],S))).then(l=>{_.addEventListener("click",k),v(l)}).catch(l=>{console.error(l)})},k=()=>{const{weapon:e,offhand:t,helmet:o,armor:s,shoe:n,cape:c}=g();e.length&&t.length&&o.length&&s.length&&n.length&&c.length&&K(g())},V=document.getElementById("generate"),D=document.getElementById("shuffle"),U=document.getElementById("menu-btn"),X=document.getElementById("save-config"),W=async()=>{const t=await(await fetch("./items.json")).json();$({...t});const o=JSON.parse(localStorage.getItem("customFilter"))||{weapon:[],armor:[],shoe:[],helmet:[],cape:[],offhand:[]};E(o||b()),J(o||b()),T(o||b()),q();const s=()=>T(g());D.addEventListener("click",s),V.addEventListener("click",k),document.getElementById("filter-menu").addEventListener("click",({target:i})=>{i.classList.contains("item-type")&&(E(H(b(),!0)),q(),B(i))});const c=document.querySelectorAll(".btn__filter");U.addEventListener("click",F),c.forEach(i=>i.addEventListener("click",R)),X.addEventListener("click",P)};document.addEventListener("DOMContentLoaded",W);const C=document.querySelector(".build-container");C.addEventListener("click",O);C.addEventListener("touchstart",O);
