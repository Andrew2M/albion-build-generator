(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const b=e=>{const t=document.querySelectorAll(".item-type"),n=document.querySelector(".offhand-slot");let s={};const c=[...t].filter(l=>l.checked).map(l=>l.name);for(let l in e)s[l]=e[l].filter(m=>c.includes(m.category));return n.dataset.state=="blocked"&&(s.weapon=s.weapon.filter(l=>l.type=="1H")),s},i={initState:{},current:{},qty:{},isRunning:!1,activeFilter:""},p=()=>i.initState,J=()=>i.activeFilter,_=e=>{i.activeFilter=e},G=()=>i.isRunning,L=e=>{i.isRunning=e},v=()=>i.current,E=e=>{i.current={...e}},z=e=>{i.initState=e,i.qty.weapon=i.initState.weapon.length,i.qty.helmet=i.initState.helmet.length,i.qty.armor=i.initState.armor.length,i.qty.shoe=i.initState.shoe.length,i.qty.offhand=i.initState.offhand.length,i.qty.cape=i.initState.cape.length},O=()=>{const e=document.querySelectorAll(".options__form");_(""),e.forEach(n=>{n.dataset.status=="checked"?n.classList.remove("remove"):n.classList.add("remove")}),document.querySelector(".options__container").classList.toggle("open__vertical")},w=()=>{const e=document.getElementById("notification"),t=v();let n=[];for(let o in t)t[o].length==0&&n.push(o);const s=n.map((o,c)=>n.length>=2&&c===n.length-1?`and <span class="category">${o}</span>`:`<span class="category">${o}</span>`);e.innerHTML=n.length?`Open <span id="link">Filter Options</span> and select at least one ${s.join(", ").split(", and").join(" and")} type!`:"",n.length?(e.style="visibility: visible;",document.getElementById("link").addEventListener("click",O)):e.style="visibility: hidden;"},f=({htmlElement:e,itemDataObj:t})=>{if(t){if(e.title=t.name,e.children[0].classList.add("hidden"),e.classList.remove("hidden"),t.type.length==2){const n=document.querySelector(".offhand-slot");n.children[0].classList.add("hidden"),n.classList.remove("hidden")}}else e.children[0].classList.add("hidden")},u=(e,t,n=250)=>(e.dataset.state&&(n=0),new Promise((s,o)=>{setTimeout(()=>{s({htmlElement:e,itemDataObj:t})},n)}));function M(e){return Math.floor(Math.random()*e)}const h=(e,t,n="")=>{if(e.dataset.state||!t.length)return;const s=t[M(t.length)];e.dataset.type=s.type;const o=`https://render.albiononline.com/v1/item/T${M(5)+4}${n}_${s.image}.png`;if(e.style.backgroundImage=`url(${o})`,s.type==="2H"){const c=document.querySelectorAll(".item-slot")[4];c.style.backgroundImage=`url(${o})`,c.title=e.name}return s};function y(e){let t=e.length,n,s;for(;t;)s=Math.floor(Math.random()*t--),n=e[t],e[t]=e[s],e[s]=n;return e}function H({weapon:e,offhand:t,helmet:n,armor:s,shoe:o,cape:c}){L(!0),g(),C();const l=document.querySelectorAll(".item-slot");document.querySelectorAll(".image-slot").forEach(d=>d.classList.add("hidden")),l.forEach(d=>d.children[0].classList.remove("hidden")),y(n),y(s),y(o),y(e),y(t),y(c),setTimeout(()=>{L(!1),g(),l.forEach(d=>d.children[0].classList.add("hidden"))},750)}const k=()=>H(v()),C=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle");e.removeEventListener("click",q),t.removeEventListener("click",k),e.classList.remove("btn--success"),e.classList.add("btn--danger"),t.classList.remove("btn--success"),t.classList.add("btn--danger")},Y=({weapon:e,offhand:t,helmet:n,armor:s,shoe:o,cape:c})=>{const l=document.querySelector(".helmet-slot"),m=document.querySelector(".armor-slot"),d=document.querySelector(".shoe-slot"),S=document.querySelector(".main-hand-slot"),I=document.querySelector(".offhand-slot"),R=document.querySelector(".cape-slot"),r=document.querySelectorAll(".item-slot"),B=document.getElementById("generate").children[0];B.classList.add("spin"),L(!0),g(),C(),r.forEach(a=>{a.dataset.state||a.children[0].classList.remove("hidden")});const T=h(l,n,"_HEAD"),$=h(m,s,"_ARMOR"),N=h(d,o,"_SHOES"),x=h(R,c),F=h(S,e),P=S.dataset.type==="1H"?h(I,t,"_OFF"):null;I.style.opacity="1",S.dataset.type=="2H"&&S.dataset.state&&(I.style.opacity="0.4"),u(r[5],x,400).then(a=>(f(a),u(r[0],T))).then(a=>(f(a),u(r[1],$))).then(a=>(f(a),u(r[2],N))).then(a=>(f(a),u(r[3],F))).then(a=>(f(a),B.classList.remove("spin"),r[3].dataset.type==="1H"?(r[4].style.opacity="1",u(r[4],P)):(r[4].style.opacity="0.4",u(r[4],F)))).then(a=>{L(!1),g(),f(a)}).catch(a=>{console.error(a)})},q=()=>Y(v()),g=()=>{const e=document.getElementById("generate"),t=document.getElementById("shuffle"),{weapon:n,offhand:s,helmet:o,armor:c,shoe:l,cape:m}=v();n.length&&s.length&&o.length&&c.length&&l.length&&m.length?(e.addEventListener("click",q),t.addEventListener("click",k),G()||(e.classList="btn__theme btn--success",t.classList="btn__theme btn--success")):(e.removeEventListener("click",q),t.removeEventListener("click",k),e.classList="btn__theme btn--danger",t.classList="btn__theme btn--danger")},A=e=>{const t=v()[e.dataset.type].length,n=document.querySelector(`.add-icon[data-type=${e.dataset.type}]`),s=document.querySelector(`.options__form[data-type=${e.dataset.type}]`);t?t>0&&(s.classList.add("options--success"),s.classList.remove("options--danger"),s.dataset.status="unchecked",s.classList.remove("remove"),n.classList.remove("btn--danger")):(s.classList.remove("options--success"),s.classList.add("options--danger"),s.dataset.status="checked",n.classList.add("btn--danger")),g()},Z=({target:e})=>{e.dataset.type&&(document.querySelectorAll(`.${e.dataset.type}`).forEach(t=>t.checked=e.dataset.state==="unchecked"),e.dataset.state=e.dataset.state==="checked"?"unchecked":"checked",e.dataset.state==="checked"?e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg>
    `:e.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"/><path fill="currentColor" d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8Z"/></svg>
  `,E(b(p())),A(e),w())},j=function(){const e=document.getElementById("filter-menu__title"),t=e.innerText,n=this.style.backgroundColor;this.style.backgroundColor="#008000",localStorage.setItem("customFilter",JSON.stringify(v())),e.innerText="Saved Filter Options",e.classList.add("heading--confirmed"),setTimeout(()=>{e.innerText=t,this.style.backgroundColor=n,e.classList.remove("heading--confirmed")},2e3)},K=e=>{const t=document.querySelectorAll(".item-type"),n=document.querySelectorAll(".options__form"),s=[];for(let o in e)e[o].forEach(c=>{s.includes(c.category)||s.push(c.category)});t.forEach(o=>{s.includes(o.name)&&(o.checked=!0)}),n.forEach(o=>A(o))},Q=({target:e})=>{e.classList.contains("item-type")&&(E(b(p())),g(),w(),A(e))},V=function(){const e=this.parentElement.parentElement;if(e.dataset.state){if(e.dataset.state)if(e.dataset.type==="2H"){const t=document.querySelector(".offhand-slot");delete e.dataset.state,delete t.dataset.state,e.children[1].style.opacity=1,e.children[1].classList.add("hidden")}else e.dataset.type&&(delete e.dataset.state,e.children[1].classList.add("hidden"))}else if(e.dataset.type==="2H"){e.dataset.state="blocked",e.children[1].style.opacity=1,e.children[1].classList.remove("hidden");const t=document.querySelector(".offhand-slot");t.dataset.state="blocked"}else e.dataset.type&&(e.dataset.state="blocked",e.children[1].style.opacity=1,e.children[1].classList.remove("hidden"));E(b(p()))},W=function(){!this.dataset.state&&this.style.backgroundImage&&(this.children[1].style.opacity=.65,this.children[1].classList.remove("hidden"))},D=function(){!this.dataset.state&&this.style.backgroundImage&&this.children[1].classList.add("hidden")},U=function(){const e=document.querySelector(".options__container");document.querySelectorAll(".options__form").forEach(s=>s.classList.add("remove")),J()!==this.dataset.type?(e.classList.add("open__vertical"),_(this.dataset.type)):(e.classList.remove("open__vertical"),_("")),document.querySelector(`.options__form[data-type="${this.dataset.type}"]`).classList.remove("remove")};const X=document.getElementById("generate"),ee=document.getElementById("shuffle"),te=document.getElementById("save-config"),ne=document.querySelectorAll(".item-slot"),se=document.querySelectorAll(".add-icon"),oe=document.querySelectorAll(".lock-icon"),ce=document.getElementById("close"),ie=async()=>{const t=await(await fetch("./items.json")).json();z({...t});const n=JSON.parse(localStorage.getItem("customFilter"));E(n||p()),K(n||p()),H(n||p()),w(),ee.addEventListener("click",k),X.addEventListener("click",q),document.getElementById("filter-menu").addEventListener("click",Q),document.querySelectorAll(".btn__filter").forEach(c=>c.addEventListener("click",Z)),se.forEach(c=>c.addEventListener("click",U,!0)),te.addEventListener("click",j),ne.forEach(c=>{c.addEventListener("mouseover",W),c.addEventListener("mouseout",D)}),oe.forEach(c=>{c.addEventListener("click",V)}),ce.addEventListener("click",O)};document.addEventListener("DOMContentLoaded",ie);
